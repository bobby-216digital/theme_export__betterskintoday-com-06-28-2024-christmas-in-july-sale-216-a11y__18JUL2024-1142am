{%- comment %}<locksmith:441c>{% endcomment -%}
  {%- include 'locksmith' -%}
{%- comment %}</locksmith:441c>{% endcomment -%}

{% comment %}
Auto-generated by Shogun.
This file can be re-written at any time.
{% endcomment %}

<!doctype html>
<html class="no-js" lang="{{ request.locale.iso_code }}" dir="{{ settings.text_direction }}">

<head>
  {{ locksmith_initializations }}
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="{{ settings.color_button }}">
  <link rel="canonical" href="{{ canonical_url }}">
  <link rel="preconnect" href="https://cdn.shopify.com" crossorigin>
  <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
  <link rel="dns-prefetch" href="https://productreviews.shopifycdn.com">
  <link rel="dns-prefetch" href="https://ajax.googleapis.com">
  <link rel="dns-prefetch" href="https://maps.googleapis.com">
  <link rel="dns-prefetch" href="https://maps.gstatic.com">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PJCRD8M');</script>
<!-- End Google Tag Manager -->

<script>
    (function(w,d,t,r,u)
    {
        var f,n,i;
        w[u]=w[u]||[],f=function()
        {
            var o={ti:"5216735", enableAutoSpaTracking: true};
            o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")
        },
        n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function()
        {
            var s=this.readyState;
            s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)
        },
        i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)
    })
    (window,document,"script","//bat.bing.com/bat.js","uetq");
</script>
  
    <script type="text/javascript">
      window._blueshiftid = 'fab9d620d47b6abca0eb9246b4890a9a';
      //window._blueshiftid = 'b0907fb9ab02aa2339a27ad86160e05b'; // Sandbox key
      window.blueshift = window.blueshift || [];
      BSFT_SOURCE = "Blueshift Shopify";

      if (blueshift.constructor === Array) {
        (function () { 
          var b = document.createElement("script");
          b.type = "text/javascript", b.async = !0, 
          b.src = ("https:" === document.location.protocol ? "https:" : "http:") + "//cdn.getblueshift.com/blueshift.js"; 
          var c = document.getElementsByTagName("script")[0]; c.parentNode.insertBefore(b, c); 
        })() 
      }    

      if (blueshift.constructor === Array) { 
        blueshift.load = function () {
          var d = function (a) { 
            return function () {
              blueshift.push([a].concat(Array.prototype.slice.call(arguments, 0))) 
            } 
          }, 
          e = ["config", "identify", "track", "click", "pageload", "capture", "retarget", "live"]; 
          for (var f = 0; f < e.length; f++) {
            blueshift[e[f]] = d(e[f])
          }
        };
      }
      blueshift.load(); 
      blueshift.pageload({bsft_source: BSFT_SOURCE}); 
      
      // Always identify with email
      // So the cookie gets associated with this email
      blueshift.identify({ email:'{{ customer.email }}', region: '{{ settings.store_code }}', bsft_source: BSFT_SOURCE });  
                                                
      // View product
      {% if product != nil %}    
        var variant_ids = '{{ product.variants | map: 'id' | join: "," }}';    
        var parent_sku_id = '{{ product.id }}';    
        variant_ids = variant_ids.split(",");    
        var product_ids = [];
        if (variant_ids.length > 0) {      
          product_ids = product_ids.concat(variant_ids);    
        } else {      
          product_ids.push(parent_sku_id);  
        }    
        blueshift.track("view", {product_id: product_ids, parent_sku: parent_sku_id, bsft_source: BSFT_SOURCE });
      {% endif %}

      // Cart intercepts - Add/Remove/Update    
      {% if cart != nil %}    
        var item_ids = '{{ cart.items | map: 'id' | join: "," }}';    
        var item_titles = '{{ cart.items | map: 'title' | join: "," }}';    
        var item_parent_skus = '{{ cart.items | map: 'product_id' | join: "," }}';    
        var cart_id = '{{ cart.token }}';    
        var parent_sku = null;    
        {% if product != nil %}    	
          parent_sku = '{{ product.id }}';    
        {% endif %}
        item_ids = item_ids.split(",");    
        item_titles = item_titles.split(",");    
        item_parent_skus = item_parent_skus.split(",");
      {% endif %}
      
      document.addEventListener('DOMContentLoaded', (event) => {    
        // Login submit listener    
        var login_form = document.getElementById("customer_login");
        if (login_form != null) {
          login_form.addEventListener("submit", function (event) {        
            for (i = 0; i < login_form.elements.length; i++) {          
              var elem = login_form.elements[i];          
              if (elem.type == 'email') {            
                blueshift.track('login', { email: elem.value, bsft_source: BSFT_SOURCE });            
                break;          
              }        
            }      
          }, true);  
        }  
        
        // Signup
        var signup_form = document.getElementById("create_customer");
        if (signup_form != null) {
          signup_form.addEventListener("submit", function (event) {
            for (i = 0; i < signup_form.elements.length; i++) {          
              var elem = signup_form.elements[i];
              if (elem.type == 'email') {
                blueshift.track('signed_up', { email: elem.value, bsft_source: BSFT_SOURCE });
                break;          
              }        
            }      
          }, true);  
        }

        // Logout listener  
        // var logout_link = document.getElementById("customer_logout_link");    
        var logout_link = document.querySelector("a[href='/account/logout']");
        if (logout_link != null) {
          logout_link.addEventListener("click", function (event) {
            blueshift.track('logout', {email: "{{ customer.email }}", bsft_source: BSFT_SOURCE});      
          }, true);  
        }
    
        // Add to cart
        var addToCartForm = document.querySelector("form[action='/cart/add']");
        if(addToCartForm != null) {
          var submitForm = false;
          addToCartForm.addEventListener('submit', function (event) {
            //event.preventDefault();
            var product_id = null;
            var quantity = 0;

            for (i = 0; i < addToCartForm.elements.length; i++) {
              var elem = addToCartForm.elements[i]; 
              if (elem.name == "id") {
                product_id = elem.value;
              } else if (elem.name == "quantity" && elem.value && elem.value !== "") {
                quantity = elem.value;
              }
            }

            blueshift.track('add_to_cart', { product_id: product_id, quantity: quantity, _bsft_source: BSFT_SOURCE, email:'{{ customer.email }}'});
            setTimeout(function() {
              submitForm = true;
              document.querySelector("form[action='/cart/add']").submit();
            }, 1800);

            return submitForm;
          });     
        }
        
        // Search event
        var searchForm = document.querySelector("form[action='/search']");
        if(searchForm != null) {
          searchForm.addEventListener('submit', function (event) {
            for (i = 0; i < searchForm.elements.length; i++) {
              var type = null;
              var query = null;
              var elem = searchForm.elements[i];
              if (elem.name == "type") {
                type = elem.value;
              } else if (elem.name == "q" && elem.value != "") {
                query = elem.value;
              }
            }
            blueshift.track('search', { 
              type: type, query: query, _bsft_source: BSFT_SOURCE, email:'{{ customer.email }}' 
            });
          }, true);
        }

      });
        
        
      window.addEventListener('load', (event) => {

        function handleCheckout(event) {
          blueshift.identify({
            email:'{{ customer.email }}', region: '{{ settings.store_code }}', bsft_source: BSFT_SOURCE 
          });  
        }

        // Checkout event
        var checkoutButton = document.querySelector('.shopify-payment-button__button');
        if(checkoutButton != null) {
          checkoutButton.addEventListener('click', handleCheckout, true);
        }
            
        var cartCheckoutForm = document.querySelector("form[action='/cart']");
        if(cartCheckoutForm != null) {
          cartCheckoutForm.addEventListener('submit', handleCheckout, false);
        }


        function removeFromCart(event) {
          var product_id = event.target.id;
          blueshift.track('remove_from_cart', { 
            product_id: product_id, customer_id: '{{ customer.id }}', _bsft_source: BSFT_SOURCE 
          });
        }

        var removeButtons = document.getElementsByClassName('cart__remove');
        if(removeButtons != null) {
          for(i = 0; i < removeButtons.length; i++) {
            removeButtons[i].addEventListener('click', removeFromCart);
          }
        }
        
        // continue_button
        var continueButton = document.getElementById("continue_button");
        if(continueButton != null) {
          continueButton.addEventListener('submit', handleCheckout, false);
        }
        
    });
    
  </script>  
  
  {%- if settings.favicon != blank -%}
    <link rel="shortcut icon" href="{{ settings.favicon | img_url: '32x32' }}" type="image/png" />
  {%- endif -%}

  {%- render 'seo-title' -%}

  {%- if page_description -%}
  {%- comment %}<locksmith:e44d>{% endcomment -%}
    {%- capture var %}{% render 'locksmith-variables', variable: 'transparent', hiding_scope: 'resource' %}{% endcapture %}{% if var == 'true' %}<meta name="description" content="{{ page_description | escape }}">{% endif -%}
    {%- comment %}original: <meta name="description" content="{{ page_description | escape }}">{%- endcomment %}
  {%- comment %}</locksmith:e44d>{% endcomment -%}
  {%- endif -%}

  {%- render 'social-meta-tags' -%}

  {%- render 'font-face' -%}
  {{ 'theme.css' | asset_url | stylesheet_tag: preload: true }}
  {%- render 'css-variables' -%}

  <script>
    document.documentElement.className = document.documentElement.className.replace('no-js', 'js');

    window.theme = window.theme || {};
    theme.routes = {
      home: "{{ routes.root_url }}",
      cart: "{{ routes.cart_url | append: '.js' }}",
      cartPage: "{{ routes.cart_url }}",
      cartAdd: "{{ routes.cart_add_url | append: '.js' }}",
      cartChange: "{{ routes.cart_change_url | append: '.js' }}",
      search: "{{ routes.search_url }}",
      predictive_url: "{{ routes.predictive_search_url }}"
    };
    theme.strings = {
      soldOut: {{ 'products.product.sold_out' | t | json }},
      unavailable: {{ 'products.product.unavailable' | t | json }},
      inStockLabel: {{ 'products.product.in_stock_label' | t | json }},
      oneStockLabel: {{ 'products.product.stock_label.one' | t: count: '[count]' | json }},
      otherStockLabel: {{ 'products.product.stock_label.other' | t: count: '[count]' | json }},
      willNotShipUntil: {{ 'products.product.will_not_ship_until' | t: date: '[date]' | json }},
      willBeInStockAfter: {{ 'products.product.will_be_in_stock_after' | t: date: '[date]' | json }},
      waitingForStock: {{ 'products.product.waiting_for_stock' | t | json }},
      savePrice: {{ 'products.general.save_html' | t: saved_amount: '[saved_amount]' | json }},
      cartEmpty: {{ 'cart.general.empty' | t | json }},
      cartTermsConfirmation: {{ 'cart.general.terms_confirm' | t | json }},
      searchCollections: {{ 'general.search.collections' | t | json }},
      searchPages: {{ 'general.search.pages' | t | json }},
      searchArticles: {{ 'general.search.articles' | t | json }},
      productFrom: {{ 'products.general.from_text_html' | t: price: '' | json }},
      maxQuantity: {{ 'cart.general.max_quantity' | t: quantity: '[quantity]', title: '[title]' | json }}
    };
    theme.settings = {
      cartType: {{ settings.cart_type | json }},
      isCustomerTemplate: {% if request.page_type contains 'customers/' %}true{% else %}false{% endif %},
      moneyFormat: {{ shop.money_format | json }},
      saveType: {{ settings.product_save_type | json }},
      productImageSize: {{ settings.product_grid_image_size | json }},
      productImageCover: {{ settings.product_grid_image_fill }},
      predictiveSearch: {{ settings.predictive_search_enabled }},
      predictiveSearchType: {{ settings.search_type | json }},
      predictiveSearchVendor: {{ settings.predictive_search_show_vendor | json }},
      predictiveSearchPrice: {{ settings.predictive_search_show_price | json }},
      quickView: {{ settings.quick_shop_enable }},
      themeName: 'Impulse',
      themeVersion: "7.3.3"
    };
  </script>

  {{ content_for_header }}

  <script src="{{ 'vendor-scripts-v11.js' | asset_url | split: '?' | first }}" defer="defer"></script>

  {%- if shop.enabled_currencies.size > 1 -%}
    <link rel="stylesheet" href="{{ 'country-flags.css' | asset_url | split: '?' | first }}">
  {%- endif -%}

  <script src="{{ 'theme.js' | asset_url }}" defer="defer"></script>

  {%- if request.page_type contains 'customers/' -%}
    <script src="{{ 'shopify_common.js' | shopify_asset_url }}" defer="defer"></script>
  {%- endif -%}

  {% if request.design_mode %}
    <script src="https://api.archetypethemes.co/design-mode.js" defer="defer"></script>
  {% endif %}

  {% render 'shogun-head' %}

</head>



<body class="template-{{ template | replace: '.', ' ' | truncatewords: 1, '' | handle }}{% if request.path == '/challenge' %} template-challange{% endif %}" data-center-text="{{ settings.type_body_align_text }}" data-button_style="{{ settings.button_style }}" data-type_header_capitalize="{{ settings.type_header_capitalize }}" data-type_headers_align_text="{{ settings.type_headers_align_text }}" data-type_product_capitalize="{{ settings.type_product_capitalize }}" data-swatch_style="{{ settings.swatch_style }}" {% if settings.disable_animations %}data-disable-animations="true"{% endif %}>
  
  
  {{ content_for_layout }}{{ locksmith_content_for_layout_addenda }}
  
  <script src="https://cdn-widgetsrepository.yotpo.com/v1/loader/BfTAg5zxIGaze1xi9nihuA" async></script>
<script src="https://cdn-widgetsrepository.yotpo.com/v1/loader/BfTAg5zxIGaze1xi9nihuA" async></script>
<script>
    $('.payment-icons').after('<ul class="inline-list flag-icons"><li class="flag--caption"><p>Shipping to:</p></li><li class="icon--us-flag"><img src="https://cdn.shopify.com/s/files/1/0524/2165/6760/files/us-flag.png?v=1671130713" width="38" height="24"></li><li class="icon--ca-flag"><img src="https://cdn.shopify.com/s/files/1/0524/2165/6760/files/ca-flag.png?v=1671130713" width="38" height="24"></li></ul>');

    $(document).on('click', '.yotpo-banner-layout', function (e) {
      e.stopPropagation();
      location.href = "https://betterskintoday.com/pages/rewards";
    });
  </script>
  <style type="text/css">
    body, html {
      width: 100% !important;
      background: white !important;
    }
  </style>
  
</body>

</html>
